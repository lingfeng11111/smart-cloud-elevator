# ML模型警告阈值优化说明

## 🔧 优化概述

针对ML模型总是分析出严重故障的问题，对警告阈值进行了全面优化，使其更加合理和实用。

## 📊 主要调整

### 1. ML模型阈值调整
- **警告阈值**：从 `anomalyScore > 0.5` 调整为 `> 0.7`
- **严重故障阈值**：从 `anomalyScore > 0.8` 调整为 `> 0.9`
- **训练标签**：警告级别从 `0.6` 调整为 `0.7`

### 2. 参数范围优化

#### 曳引系统参数
| 参数 | 调整前正常范围 | 调整后正常范围 | 调整前警告范围 | 调整后警告范围 |
|------|----------------|----------------|----------------|----------------|
| 电机温度 | 25-80°C | 25-85°C | 80-95°C | 85-100°C |
| 轴承温度 | 30-95°C | 30-100°C | 95-105°C | 100-110°C |
| 振动速度 | 0.5-2.8mm/s | 0.5-3.5mm/s | 2.8-4.5mm/s | 3.5-5.0mm/s |
| 电机电流 | 16.65-20.35A | 16.65-21.0A | 20.35-21.28A | 21.0-23.0A |

#### 门系统参数
| 参数 | 调整前正常范围 | 调整后正常范围 | 调整前警告范围 | 调整后警告范围 |
|------|----------------|----------------|----------------|----------------|
| 开关门时间 | 2.0-3.0s | 2.0-4.0s | 3.0-5.0s | 4.0-6.0s |

#### 电气控制系统参数
| 参数 | 调整前正常范围 | 调整后正常范围 | 调整前警告范围 | 调整后警告范围 |
|------|----------------|----------------|----------------|----------------|
| 电压波动 | -10~10% | -12~12% | 10-15% | 12-18% |
| 电流负载 | 16.65-20.35A | 16.65-21.0A | 20.35-21.28A | 21.0-23.0A |

### 3. 异常评分算法调整

- **正常范围异常评分**：从最大0.3降低至最大0.2
- **警告范围异常评分**：基础评分从0.5降低至0.3
- **严重故障异常评分**：基础评分从0.85降低至0.8

## 🎯 优化效果

### 预期改进
1. **减少误报**：正常运行参数不再被误判为严重故障
2. **更合理的分级**：警告和严重故障的判断更符合实际情况
3. **更好的用户体验**：减少不必要的紧急维护通知

### 测试覆盖
- ✅ 正常范围参数测试
- ✅ 警告范围边界测试  
- ✅ 严重故障确认测试
- ✅ 批量参数范围验证

## 🔍 技术细节

### 调整原理
1. **扩大正常范围**：考虑到设备老化和环境因素的影响
2. **提高警告阈值**：避免过度敏感的警告
3. **优化评分算法**：使异常评分更加线性和合理

### 兼容性保证
- 保持原有API接口不变
- 向后兼容现有调用方式
- 新旧版本平滑过渡

## 📈 使用建议

### 监控策略
1. **正常运行**：异常评分 < 0.3，继续正常监控
2. **预防性维护**：异常评分 0.3-0.7，安排预防性检查
3. **紧急处理**：异常评分 > 0.7，立即采取措施

### 参数调优
如需进一步调整，可以修改 `ElevatorMLAnalyzer.js` 中的：
- `parameterSpecs` 对象中的范围定义
- ML模型阈值判断逻辑
- 异常评分计算公式

## 🧪 测试验证

使用提供的测试页面 `test_ml_thresholds.html` 可以：
- 运行预设测试用例
- 自定义参数测试
- 批量范围验证
- 实时查看优化效果

## 📝 注意事项

1. **渐进式调整**：建议先在测试环境验证效果
2. **持续监控**：观察实际运行中的表现
3. **数据反馈**：根据实际故障情况进一步微调
4. **定期评估**：建议每季度评估一次阈值合理性

## 🔄 版本信息

- **优化版本**：ElevatorMLAnalyzer v5.0 - 阈值优化版
- **优化日期**：2024年当前日期
- **兼容性**：向后兼容 v4.x 版本
- **测试状态**：已完成基础测试，待生产环境验证 